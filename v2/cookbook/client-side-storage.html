


<!DOCTYPE html>
<html lang="ru">
    <head><meta name="generator" content="Hexo 3.8.0">
        <title>Хранение данных на стороне клиента — Vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js — Прогрессивный JavaScript-фреймворк">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="alternate" hreflang="x-default" href="https://vuejs.org/v2/cookbook/client-side-storage.html">
        <link rel="alternate" hreflang="zh" href="https://cn.vuejs.org/v2/cookbook/client-side-storage.html">
        <link rel="alternate" hreflang="ja" href="https://jp.vuejs.org/v2/cookbook/client-side-storage.html">
        <link rel="alternate" hreflang="ru" href="https://ru.vuejs.org/v2/cookbook/client-side-storage.html">
        <link rel="alternate" hreflang="ko" href="https://kr.vuejs.org/v2/cookbook/client-side-storage.html">
        <link rel="alternate" hreflang="pt-BR" href="https://br.vuejs.org/v2/cookbook/client-side-storage.html">
        <link rel="alternate" hreflang="fr" href="https://fr.vuejs.org/v2/cookbook/client-side-storage.html">
        <link rel="alternate" hreflang="es" href="https://es.vuejs.org/v2/cookbook/client-side-storage.html">

        <meta property="og:type" content="article">
        <meta property="og:title" content="Хранение данных на стороне клиента — Vue.js">
        <meta property="og:description" content="Vue.js — Прогрессивный JavaScript-фреймворк">
        <meta property="og:image" content="https://ru.vuejs.org//images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Хранение данных на стороне клиента — Vue.js">
        <meta name="twitter:description" content="Vue.js — Прогрессивный JavaScript-фреймворк">
        <meta name="twitter:image" content="https://ru.vuejs.org/images/logo.png">

        <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192" href="/images/icons/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
        <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
        <link rel="icon" href="/images/logo.png" type="image/png">

        <meta name="msapplication-TileColor" content="#4fc08d">
        <meta name="theme-color" content="#4fc08d">

        <meta name="msapplication-config" content="browserconfig.xml">
        <link rel="manifest" href="/manifest.json">

        <link href="https://fonts.googleapis.com" rel="preconnect" crossorigin="">
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="">
        <link href="https://maxcdn.bootstrapcdn.com" rel="preconnect" crossorigin="">

        <link href="//fonts.googleapis.com/css?family=Roboto Mono&display=swap" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Dosis:500&text=Vue.js&display=swap" rel="stylesheet" type="text/css">

        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/js/vue.js"></script>

        

        <script>
          Vue.config.productionTip = false
          window.PAGE_TYPE = "cookbook"
        </script>

        <!-- ga -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-46852172-1', 'ru.vuejs.org');

          ga('send', 'pageview');
        </script>

        <!-- vimeo analytics -->
        <script type="text/javascript" defer="defer" src="https://extend.vimeocdn.com/ga/72160148.js"></script>
    </head>
    <body class="docs">
        <div id="mobile-bar">
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <header id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png" alt="Логотип Vue">
    <span>Vue.js</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input" aria-label="Поиск">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link current">Обучение</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Документация</h4></li>
    <li>
      <ul>
        <li><a href="/v2/guide/" class="nav-link">Руководство</a></li>
        <li><a href="/v2/api/" class="nav-link">API</a></li>
        <li><a href="/v2/style-guide/" class="nav-link">Рекомендации</a></li>
        <li><a href="/v2/examples/" class="nav-link">Примеры</a></li>
        <li><a href="/v2/cookbook/" class="nav-link current">Книга рецептов</a></li>
      </ul>
    </li>
    <li><h4>Видео курсы</h4></li>
    <li>
      <ul>
        <li>
          <a href="https://www.vuemastery.com/courses/" class="nav-link" target="_blank" rel="sponsored noopener">
            Vue Mastery
          </a>
        </li>
        <li>
          <a href="https://vueschool.io/?friend=vuejs&utm_source=Vuejs.org&utm_medium=Link&utm_content=Navbar%20Dropdown" class="nav-link" target="_blank" rel="sponsored noopener">
            Vue School
          </a>
        </li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Экосистема</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Помощь</h4></li>
    <li><ul>
      <li><a href="https://forum.vuejs.org/" class="nav-link" target="_blank" rel="noopener">Форум</a></li>
      <li><a href="https://chat.vuejs.org/" class="nav-link" target="_blank" rel="noopener">Чат</a></li>
      <li><a href="https://events.vuejs.org/meetups/" class="nav-link" target="_blank" rel="noopener">Митапы</a></li>
    </ul></li>
    <li><h4>Инструментарий</h4></li>
    <li>
      <ul>
        <li><a href="https://github.com/vuejs/vue-devtools" class="nav-link" target="_blank" rel="noopener">Инструменты разработчика</a></li>
        <li><a href="https://cli.vuejs.org/ru/" class="nav-link" target="_blank" rel="noopener">Vue CLI</a></li>
        <li><a href="https://vue-loader.vuejs.org/ru/" class="nav-link" target="_blank" rel="noopener">Vue Loader</a></li>
      </ul>
    </li>
    <li><h4>Официальные плагины</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/ru/" class="nav-link" target="_blank" rel="noopener">Vue Router</a></li>
      <li><a href="https://vuex.vuejs.org/ru/" class="nav-link" target="_blank" rel="noopener">Vuex</a></li>
      <li><a href="https://ssr.vuejs.org/ru/" class="nav-link" target="_blank" rel="noopener">Vue Server Renderer</a></li>
    </ul></li>
    <li><h4>Новости</h4></li>
    <li><ul>
      <li><a href="https://news.vuejs.org" class="nav-link" target="_blank" rel="noopener">Еженедельные новости</a></li>
      <li><a href="https://github.com/vuejs/vue/projects/6" class="nav-link" target="_blank" rel="noopener">Roadmap</a></li>
      <li><a href="https://events.vuejs.org/" class="nav-link" target="_blank" rel="noopener">События</a></li>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank" rel="noopener">Twitter</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank" rel="noopener">Блог</a></li>
      <li><a href="https://vuejsjob.com/?ref=vuejs" class="nav-link" target="_blank" rel="noopener">Вакансии</a></li>
      <li><a href="https://dev.to/t/vue" class="nav-link" target="_blank" rel="noopener">Сообщество разработчиков</a></li>
    </ul></li>
  </ul>
</li>

<li>
  <a href="/v2/guide/team.html" class="nav-link team">Команда</a>
</li>
<li class="nav-dropdown-container resources">
  <a href="#" class="nav-link">Ресурсы</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/resources/partners.html" class="nav-link">Партнёры</a></li>
    <li><a href="/resources/themes.html" class="nav-link">Темы</a></li>
    <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank" rel="noopener">Awesome Vue</a></li>
    <li><a href="https://awesomejs.dev/for/vue/" class="nav-link" target="_blank" rel="noopener">Найти пакеты для Vue</a></li>
  </ul>
</li>

<!-- <li>
  <a href="/partners" class="nav-link ">Партнёры</a>
</li> -->
<li class="nav-dropdown-container support-vue">
  <a href="/support-vuejs/" class="nav-link">Поддержать Vue</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/support-vuejs/#One-time-Donations" class="nav-link">Единоразовые пожертвования</a></li>
    <li><a href="/support-vuejs/#Recurring-Pledges" class="nav-link">Повторяющиеся взносы</a></li>
    <li><a href="https://vue.threadless.com" target="_blank" rel="noopener" class="nav-link">Магазин футболок</a></li>
  </ul>
</li>

<li class="nav-dropdown-container language">
  <a class="nav-link">Переводы</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://vuejs.org/v2/cookbook/client-side-storage.html" class="nav-link" target="_blank" rel="noopener">English</a></li>
    <li><a href="https://cn.vuejs.org/v2/cookbook/client-side-storage.html" class="nav-link" target="_blank" rel="noopener">中文</a></li>
    <li><a href="https://jp.vuejs.org/v2/cookbook/client-side-storage.html" class="nav-link" target="_blank" rel="noopener">日本語</a></li>
    <li><a href="https://kr.vuejs.org/v2/cookbook/client-side-storage.html" class="nav-link" target="_blank" rel="noopener">한국어</a></li>
    <li><a href="https://br.vuejs.org/v2/cookbook/client-side-storage.html" class="nav-link" target="_blank" rel="noopener">Português</a></li>
    <li><a href="https://fr.vuejs.org/v2/cookbook/client-side-storage.html" class="nav-link" target="_blank" rel="noopener">Français</a></li>
    <li><a href="https://vi.vuejs.org/v2/cookbook/client-side-storage.html" class="nav-link" target="_blank" rel="noopener">Tiếng Việt</a></li>
    <li><a href="https://es.vuejs.org/v2/cookbook/client-side-storage.html" class="nav-link" target="_blank" rel="noopener">Español</a></li>
    <li><a href="https://docs.vuejs.id/v2/cookbook/client-side-storage.html" class="nav-link" target="_blank" rel="noopener">Bahasa Indonesia</a></li>
  </ul>
</li>


  </ul>
</header>

        
            <div id="main" class="fix-sidebar">
              
    

<div class="sidebar">
  <div class="sidebar-inner">
    
    <div class="list">
      <div id="sidebar-sponsors-special">
  <div class="main-sponsor">
    <span>Специальный спонсор</span>
    <div>
    <a href="https://autocode.com" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/autocode.svg" alt="Autocode">
    </a>
    </div>
  </div>
</div>

<div id="sidebar-sponsors-platinum-left">
  <div class="main-sponsor">
    <span>Платиновые спонсоры</span>
    <div>
    <a href="https://vueschool.io/?utm_source=Vuejs.org&utm_medium=Banner&utm_campaign=Sponsored%20Banner&utm_content=V1" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/vueschool.png" alt="VueSchool">
    </a>
    <a href="https://vehikl.com/" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/vehikl.png" alt="Vehikl">
    </a>
    <a href="https://retool.com/?utm_source=sponsor&utm_campaign=vue" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/retool.png" alt="Retool">
    </a>
    <a href="https://passionatepeople.io/" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/passionate_people.png" alt="Passionate People">
    </a>
    <a href="https://www.storyblok.com" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/storyblok.png" alt="Storyblok">
    </a>
    </div>
  </div>
  <a class="become-backer" href="/support-vuejs">
    Стать спонсором
  </a>
</div>



      
        <h2>
          
          Книга рецептов<sup class="beta">beta</sup>
          
        </h2>
        <ul class="menu-root">
    
        
        
        <li>
            <a href="/v2/cookbook/index.html" class="sidebar-link">Введение</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/adding-instance-properties.html" class="sidebar-link">Добавление свойств экземпляра</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/form-validation.html" class="sidebar-link">Валидация форм</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/editable-svg-icons.html" class="sidebar-link">Редактируемая система SVG-иконок</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/serverless-blog.html" class="sidebar-link">Создание блога, управляемого CMS</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/unit-testing-vue-components.html" class="sidebar-link">Модульное тестирование Vue-компонентов</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/creating-custom-scroll-directives.html" class="sidebar-link">Создание пользовательской директивы прокрутки</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/debugging-in-vscode.html" class="sidebar-link">Отладка в VS Code</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/using-axios-to-consume-apis.html" class="sidebar-link">Используем Axios для доступа к API</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/avoiding-memory-leaks.html" class="sidebar-link">Устранение утечек памяти</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/client-side-storage.html" class="sidebar-link current">Хранение данных на стороне клиента</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/packaging-sfc-for-npm.html" class="sidebar-link">Публикация Vue-компонентов в npm</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/dockerize-vuejs-app.html" class="sidebar-link">Интегрируем Docker в приложение Vue.js</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/practical-use-of-scoped-slots.html" class="sidebar-link">Practical use of scoped slots with GoogleMaps</a>
        </li>
    
</ul>

      
    </div>
  </div>
</div>

<div id="sidebar-sponsors-platinum-right">
  <div class="main-sponsor">
    <span>Платиновые спонсоры</span>
    <div>
    <a href="https://vueschool.io/?utm_source=Vuejs.org&utm_medium=Banner&utm_campaign=Sponsored%20Banner&utm_content=V1" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/vueschool.png" alt="VueSchool">
    </a>
    <a href="https://vehikl.com/" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/vehikl.png" alt="Vehikl">
    </a>
    <a href="https://retool.com/?utm_source=sponsor&utm_campaign=vue" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/retool.png" alt="Retool">
    </a>
    <a href="https://passionatepeople.io/" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/passionate_people.png" alt="Passionate People">
    </a>
    <a href="https://www.storyblok.com" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/storyblok.png" alt="Storyblok">
    </a>
    </div>
  </div>
  <a class="become-backer" href="/support-vuejs">
    Стать спонсором
  </a>
</div>




<div class="content cookbook with-sidebar ">
    
      
        
  <div id="ad">
    <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYIK2QU&placement=vuejsorg" id="_carbonads_js">
    </script>
  </div>


      
    
    
      <h1>Хранение данных на стороне клиента</h1>
    
    
      <h2 id="Простой-пример"><a href="#Простой-пример" class="headerlink" title="Простой пример"></a>Простой пример</h2><p>Хранение данных на стороне клиента — это отличный способ быстро повысить производительность приложения, который заключается в том, чтобы пропустить получение информации от сервера каждый раз, когда пользователь нуждается в ней. Это особенно полезно в оффлайн-режиме, но даже для онлайн пользователей будет польза от использования данных локально в противовес удалённому серверу. Хранение на стороне клиента может быть организовано с использованием <a href="https://developer.mozilla.org/ru/docs/Web/HTTP/Cookies" target="_blank" rel="noopener">cookies</a>, <a href="https://developer.mozilla.org/ru/docs/Web/API/Web_Storage_API" target="_blank" rel="noopener">Local Storage</a> (технически «Web Storage»), <a href="https://developer.mozilla.org/ru/docs/IndexedDB" target="_blank" rel="noopener">IndexedDB</a> и <a href="https://www.w3.org/TR/webdatabase/" target="_blank" rel="noopener">WebSQL</a> (устаревший метод, который не следует использовать в новых проектах).</p>
<p>В этом рецепте мы сфокусируемся на Local Storage (далее — локальное хранилище), простейшем механизме хранения. Локальное хранилище использует систему ключ-значение для хранения данных. Это ограничивает нас хранением только простых значений, но сложные структуры данных возможно сохранять, если вы готовы сериализовывать их в JSON и обратно. Локальное хранилище подходит для небольших наборов данных, например, настроек пользователя или данных формы. Для больших объёмов данных, где требуются комплексные требования к хранению, лучше использовать IndexedDB.</p>
<p>Давайте начнём с простого примера в виде формы:</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
  Моё имя <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"name"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
<p>Этот пример имеет одно поле ввода, привязанное к свойству данных <code>name</code> в экземпляре Vue:</p>
<pre><code class="hljs js"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> Vue(&#123;
  <span class="hljs-attr">el</span>: <span class="hljs-string">'#app'</span>,
  <span class="hljs-attr">data</span>: &#123;
    <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>
  &#125;,
  mounted() &#123;
    <span class="hljs-keyword">if</span> (localStorage.name) &#123;
      <span class="hljs-keyword">this</span>.name = localStorage.name;
    &#125;
  &#125;,
  <span class="hljs-attr">watch</span>: &#123;
    name(newName) &#123;
      localStorage.name = newName;
    &#125;
  &#125;
&#125;);</code></pre>
<p>Обратите внимание на фрагменты <code>mounted</code> и <code>watch</code>. Мы используем <code>mounted</code> для управления загрузкой значения из localStorage. Для управления записью данных в базу, мы следим за значением <code>name</code> и немедленно записываем изменения.</p>
<p>Вы можете запустить этот пример самостоятельно здесь:</p>
<p data-height="265" data-theme-id="0" data-slug-hash="KodaKb" data-default-tab="js,result" data-user="cfjedimaster" data-embed-version="2" data-pen-title="testing localstorage" class="codepen">Посмотрите Pen <a href="https://codepen.io/cfjedimaster/pen/KodaKb/" target="_blank" rel="noopener">тестирование localstorage</a> от Raymond Camden (<a href="https://codepen.io/cfjedimaster" target="_blank" rel="noopener">@cfjedimaster</a>) на <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><br><script async src="https://static.codepen.io/assets/embed/ei.js"></script><br><br>Введите что-нибудь в форму и затем обновите эту страницу. Вы заметите, что введённое вами ранее значение будет показано автоматически. Не забывайте, что ваш браузер предоставляет замечательные инструменты разработчика для просмотра хранилища на стороне клиента. Ниже пример в Firefox:<br><br><img src="/images/devtools-storage.png" alt="Storage devtools in Firefox"><br><br>И вот пример в Chrome:<br><br><img src="/images/devtools-storage-chrome.png" alt="Storage devtools in Chrome"><br><br>И наконец пример в Microsoft Edge. Обратите внимание, что вы можете найти сохранённые значения приложения на вкладке «Отладчик».<br><br><img src="/images/devtools-storage-edge.png" alt="Storage devtools in Edge"><br><br><p class="tip">Небольшая заметка: инструменты разработчика также предоставляют возможность удалять значения из хранилища. Это может быть очень полезным при тестировании.</p>

<p>Немедленная запись значения может быть нецелесообразной. Давайте рассмотрим чуть более сложный пример. Во-первых, обновим форму.</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    Моё имя <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"name"</span>&gt;</span>
    и мне <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"age"</span>&gt;</span> лет.
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"persist"</span>&gt;</span>Сохранить<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
<p>У нас есть 2 поля (опять-таки связанные с экземпляром Vue), но теперь добавилась и кнопка, запускающая метод <code>persist</code>. Давайте посмотрим на код JavaScript.</p>
<pre><code class="hljs js"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> Vue(&#123;
  <span class="hljs-attr">el</span>: <span class="hljs-string">'#app'</span>,
  <span class="hljs-attr">data</span>: &#123;
    <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">0</span>
  &#125;,
  mounted() &#123;
    <span class="hljs-keyword">if</span> (localStorage.name) &#123;
      <span class="hljs-keyword">this</span>.name = localStorage.name;
    &#125;
    <span class="hljs-keyword">if</span> (localStorage.age) &#123;
      <span class="hljs-keyword">this</span>.age = localStorage.age;
    &#125;
  &#125;,
  <span class="hljs-attr">methods</span>: &#123;
    persist() &#123;
      localStorage.name = <span class="hljs-keyword">this</span>.name;
      localStorage.age = <span class="hljs-keyword">this</span>.age;
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'теперь я притворяюсь, что сделал ещё кое-что...'</span>);
    &#125;
  &#125;
&#125;)</code></pre>
<p>Как и раньше, используем <code>mounted</code> для получения сохранённых данных, если такие были. На этот раз, однако, данные сохраняются только при нажатии кнопки. Мы также можем сделать любые проверки или преобразования перед сохранением значения. Вы также можете сохранить дату последнего обновления данных. С такими метаданными, метод <code>mounted</code> может проверять, следует ли сохранять значения снова или нет. Вы можете попробовать эту версию ниже.</p>
<p></p><p data-height="265" data-theme-id="0" data-slug-hash="rdOjLN" data-default-tab="js,result" data-user="cfjedimaster" data-embed-version="2" data-pen-title="testing localstorage 2" class="codepen">Посмотрите Pen <a href="https://codepen.io/cfjedimaster/pen/rdOjLN/" target="_blank" rel="noopener">тестирование localstorage 2</a> от Raymond Camden (<a href="https://codepen.io/cfjedimaster" target="_blank" rel="noopener">@cfjedimaster</a>) на <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><p></p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<h2 id="Работа-со-сложными-значениями"><a href="#Работа-со-сложными-значениями" class="headerlink" title="Работа со сложными значениями"></a>Работа со сложными значениями</h2><p>Локальное хранилище работает только с простыми значениями. Для хранения более комплексных значений (объектов или массивов) вам необходимо будет самостоятельно преобразовывать их в JSON и обратно. Ниже представлен пример сохранения массива кошек.</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Коты<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(cat, n) in cats"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cat"</span>&gt;</span>&#123;&#123; cat &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"removeCat(n)"</span>&gt;</span>Удалить<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newCat"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"addCat"</span>&gt;</span>Добавить кота<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
<p>Это приложение состоит из простого списка сверху (с кнопкой для удаления кота) и небольшой формы внизу для добавления нового кота. Посмотрим на код JavaScript.</p>
<pre><code class="hljs js"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> Vue(&#123;
  <span class="hljs-attr">el</span>: <span class="hljs-string">'#app'</span>,
  <span class="hljs-attr">data</span>: &#123;
    <span class="hljs-attr">cats</span>: [],
    <span class="hljs-attr">newCat</span>: <span class="hljs-literal">null</span>
  &#125;,
  mounted() &#123;
    <span class="hljs-keyword">if</span> (localStorage.getItem(<span class="hljs-string">'cats'</span>)) &#123;
      <span class="hljs-keyword">try</span> &#123;
        <span class="hljs-keyword">this</span>.cats = <span class="hljs-built_in">JSON</span>.parse(localStorage.getItem(<span class="hljs-string">'cats'</span>));
      &#125; <span class="hljs-keyword">catch</span>(e) &#123;
        localStorage.removeItem(<span class="hljs-string">'cats'</span>);
      &#125;
    &#125;
  &#125;,
  <span class="hljs-attr">methods</span>: &#123;
    addCat() &#123;
      <span class="hljs-comment">// убедиться, что было что-либо введено</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.newCat) &#123;
        <span class="hljs-keyword">return</span>;
      &#125;

      <span class="hljs-keyword">this</span>.cats.push(<span class="hljs-keyword">this</span>.newCat);
      <span class="hljs-keyword">this</span>.newCat = <span class="hljs-string">''</span>;
      <span class="hljs-keyword">this</span>.saveCats();
    &#125;,
    removeCat(x) &#123;
      <span class="hljs-keyword">this</span>.cats.splice(x, <span class="hljs-number">1</span>);
      <span class="hljs-keyword">this</span>.saveCats();
    &#125;,
    saveCats() &#123;
      <span class="hljs-keyword">const</span> parsed = <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>.cats);
      localStorage.setItem(<span class="hljs-string">'cats'</span>, parsed);
    &#125;
  &#125;
&#125;)</code></pre>
<p>В этом приложении мы будем использовать Local Storage API вместо «прямого» доступа. Оба варианта работают, однако метод API в целом предпочтительнее. В хуке <code>mounted</code> мы получаем JSON-значение и преобразуем в объект. Если что-то пошло не так, мы предполагаем, что данные повреждены и удаляем их. (Помните, если ваше приложение использует хранилище на стороне клиента, пользователь в любое время имеет доступ к нему и может изменить на своё усмотрение).</p>
<p>Теперь у нас есть три метода для управления списком котов. Как <code>addCat</code>, так и <code>removeCat</code> обновляют данные экземпляра Vue в <code>this.cats</code>. Затем они вызывают метод <code>saveCats</code>, который занимается сериализацией и сохранением данных. Вы можете попробовать эту версию ниже.</p>
<p></p><p data-height="265" data-theme-id="0" data-slug-hash="qoYbyW" data-default-tab="js,result" data-user="cfjedimaster" data-embed-version="2" data-pen-title="localstorage, complex" class="codepen">Посмотрите Pen <a href="https://codepen.io/cfjedimaster/pen/qoYbyW/" target="_blank" rel="noopener">localstorage, complex</a> от Raymond Camden (<a href="https://codepen.io/cfjedimaster" target="_blank" rel="noopener">@cfjedimaster</a>) на <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><p></p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<h2 id="Альтернативные-варианты"><a href="#Альтернативные-варианты" class="headerlink" title="Альтернативные варианты"></a>Альтернативные варианты</h2><p>В то время как Local Storage API относительно прост, в нём отсутствуют некоторые базовые возможности, которые будут полезны во многих приложениях. Следующие плагины оборачивают доступ к локальному хранилищу и упрощают его, а также добавляют такую функциональность, как, например, значения по умолчанию.</p>
<ul>
<li><a href="https://github.com/pinguinjkeke/vue-local-storage" target="_blank" rel="noopener">vue-local-storage</a></li>
<li><a href="https://github.com/ropbla9/vue-reactive-storage" target="_blank" rel="noopener">vue-reactive-storage</a></li>
<li><a href="https://github.com/yarkovaleksei/vue2-storage" target="_blank" rel="noopener">vue2-storage</a></li>
</ul>
<h2 id="Итоги"><a href="#Итоги" class="headerlink" title="Итоги"></a>Итоги</h2><p>Хотя браузер никогда не заменит системы хранения на сервере, наличие различных способов кэширования данных локально может дать огромный прирост производительности вашему приложению, и работа с ними во Vue.js делает его ещё более мощным.</p>

    
    
    <div class="footer">
        <script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>
<div id="bsa-native"></div>
<script>
_bsa.init('custom', 'CKYD62QM', 'placement:vuejsorg',
  {
    target: '#bsa-native',
    template: '<a class="native-box" href="##statlink##"><div class="native-sponsor">Sponsor</div><div class="native-text"><strong>##company##</strong> — ##description##</div></a>'
  }
);
</script>

      Обнаружили ошибку или хотите добавить что-то своё в документацию?
      <a href="https://github.com/translation-gang/ru.vuejs.org/blob/master/src/v2/cookbook/client-side-storage.md" rel="noopener" target="_blank">
        Отредактируйте эту страницу на GitHub!
      </a>
    </div>
</div>

            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/css.escape.js"></script>
        <script src="/js/common.js"></script>

        <!-- search -->
        <link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="/css/search.css">
        <script src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
        <script>
        [
          '#search-query-nav',
          '#search-query-sidebar',
          '#search-query-menu'
        ].forEach(function (selector) {
          if (!document.querySelector(selector)) return
          // search index defaults to v2
          var match = window.location.pathname.match(/^\/(v\d+)/)
          var version = match ? match[1] : 'v2'
          docsearch({
            appId: 'BH4D9OD16A',
            apiKey: 'c6f9366f6f7fe057ee3e01747b603d9f',
            indexName: 'vuejs_ru',
            inputSelector: selector,
            algoliaOptions: { facetFilters: ["version:" + version] },
            autocompleteOptions: { hint: false, appendTo: 'body'}
          })
        })
        </script>
    </body>
</html>
