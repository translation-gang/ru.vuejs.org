

<!DOCTYPE html>
<html lang="ru">
    <head>
        <title>Unit Testing Vue Components — Vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js — Прогрессивный JavaScript-фреймворк">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <link rel="alternate" hreflang="x-default" href="https://vuejs.org/v2/cookbook/unit-testing-vue-components.html">
        <link rel="alternate" hreflang="zh" href="https://cn.vuejs.org/v2/cookbook/unit-testing-vue-components.html">
        <link rel="alternate" hreflang="ja" href="https://jp.vuejs.org/v2/cookbook/unit-testing-vue-components.html">
        <link rel="alternate" hreflang="ru" href="https://ru.vuejs.org/v2/cookbook/unit-testing-vue-components.html">
        <link rel="alternate" hreflang="ko" href="https://kr.vuejs.org/v2/cookbook/unit-testing-vue-components.html">
        <link rel="alternate" hreflang="pt-BR" href="https://br.vuejs.org/v2/cookbook/unit-testing-vue-components.html">
        <link rel="alternate" hreflang="fr" href="https://fr.vuejs.org/v2/cookbook/unit-testing-vue-components.html">

        <meta property="og:type" content="article">
        <meta property="og:title" content="Unit Testing Vue Components — Vue.js">
        <meta property="og:description" content="Vue.js — Прогрессивный JavaScript-фреймворк">
        <meta property="og:image" content="https://ru.vuejs.org//images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Unit Testing Vue Components — Vue.js">
        <meta name="twitter:description" content="Vue.js — Прогрессивный JavaScript-фреймворк">
        <meta name="twitter:image" content="https://ru.vuejs.org/images/logo.png">

        <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="/images/icons/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
        <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
        <link rel="icon" href="/images/logo.png" type="image/png">

        <meta name="msapplication-TileColor" content="#4fc08d">
        <meta name="theme-color" content="#4fc08d">

        <meta name="msapplication-config" content="browserconfig.xml">
        <link rel="manifest" href="/manifest.json">

        <link href='//fonts.googleapis.com/css?family=Roboto Mono' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Dosis:500&text=Vue.js' rel='stylesheet' type='text/css'>

        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/js/vue.js"></script>
        <script>window.PAGE_TYPE = "cookbook"</script>

        <!-- ga -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-46852172-1', 'ru.vuejs.org');

          ga('send', 'pageview');
        </script>

        <!-- vimeo analytics -->
        <script type="text/javascript" defer="defer" src="https://extend.vimeocdn.com/ga/72160148.js"></script>
    </head>
    <body class="docs">
        <div id="mobile-bar" >
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png">
    <span>Vue.js</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link current">Обучение</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/v2/guide/" class="nav-link">Руководство</a></li>
      <li><a href="/v2/api/" class="nav-link">API</a></li>
      <li><a href="/v2/style-guide/" class="nav-link">Рекомендации</a></li>
      <li><a href="/v2/examples/" class="nav-link">Примеры</a></li>
      <li><a href="/v2/cookbook/" class="nav-link current">Cookbook</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Экосистема</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Помощь</h4></li>
    <li><ul>
      <li><a href="https://forum.vuejs.org/" class="nav-link" target="_blank">Форум</a></li>
      <li><a href="https://chat.vuejs.org/" class="nav-link" target="_blank">Чат</a></li>
    </ul></li>
    <li><h4>Инструментарий</h4></li>
    <li>
      <ul>
        <li><a href="https://github.com/vuejs/vue-devtools" class="nav-link" target="_blank">Инструменты разработчика</a></li>
        <li><a href="https://vuejs-templates.github.io/webpack" class="nav-link" target="_blank">Шаблон Webpack</a></li>
        <li><a href="https://vue-loader.vuejs.org" class="nav-link" target="_blank">Vue Loader</a></li>
      </ul>
    </li>
    <li><h4>Официальные плагины</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/" class="nav-link" target="_blank">Vue Router</a></li>
      <li><a href="https://vuex.vuejs.org/" class="nav-link" target="_blank">Vuex</a></li>
      <li><a href="https://ssr.vuejs.org/" class="nav-link" target="_blank">Vue Server Renderer</a></li>
    </ul></li>
    <li><h4>Новости</h4></li>
    <li><ul>
      <li><a href="https://news.vuejs.org" class="nav-link" target="_blank">Еженедельные новости</a></li>
      <li><a href="https://github.com/vuejs/roadmap" class="nav-link" target="_blank">Roadmap</a></li>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank">Блог</a></li>
      <li><a href="https://vuejsjob.com/?ref=vuejs" class="nav-link" target="_blank">Вакансии</a></li>
    </ul></li>
    <li><h4>Списки ресурсов</h4></li>
    <li><ul>
      <li><a href="https://github.com/vuejs" class="nav-link" target="_blank">Официальные репозитории</a></li>
      <li><a href="https://curated.vuejs.org/" class="nav-link" target="_blank">Vue Curated</a></li>
      <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank">Awesome Vue</a></li>
    </ul></li>
  </ul>
</li>

<li>
  <a href="/v2/guide/team.html" class="nav-link team">Команда</a>
</li>
<li class="nav-dropdown-container support-vue">
  <a href="/support-vuejs/" class="nav-link">Поддержать Vue</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/support-vuejs/#One-time-Donations" class="nav-link">Единоразовые пожертвования</a></li>
      <li><a href="/support-vuejs/#Recurring-Pledges" class="nav-link">Повторяющиеся взносы</a></li>
      <li><a href="https://vue.threadless.com" target="_blank" class="nav-link">Магазин футболок</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container language">
  <a class="nav-link">Переводы</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">English</a></li>
    <li><a href="https://cn.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">中文</a></li>
    <li><a href="https://jp.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">日本語</a></li>
    <li><a href="https://kr.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">한국어</a></li>
    <li><a href="https://br.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">Português</a></li>
    <li><a href="https://fr.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">Français</a></li>
    <li><a href="https://vi.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">Tiếng Việt</a></li>
  </ul>
</li>


  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <div class="sidebar-inner">
        <ul class="main-menu">
            <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link current">Обучение</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/v2/guide/" class="nav-link">Руководство</a></li>
      <li><a href="/v2/api/" class="nav-link">API</a></li>
      <li><a href="/v2/style-guide/" class="nav-link">Рекомендации</a></li>
      <li><a href="/v2/examples/" class="nav-link">Примеры</a></li>
      <li><a href="/v2/cookbook/" class="nav-link current">Cookbook</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Экосистема</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Помощь</h4></li>
    <li><ul>
      <li><a href="https://forum.vuejs.org/" class="nav-link" target="_blank">Форум</a></li>
      <li><a href="https://chat.vuejs.org/" class="nav-link" target="_blank">Чат</a></li>
    </ul></li>
    <li><h4>Инструментарий</h4></li>
    <li>
      <ul>
        <li><a href="https://github.com/vuejs/vue-devtools" class="nav-link" target="_blank">Инструменты разработчика</a></li>
        <li><a href="https://vuejs-templates.github.io/webpack" class="nav-link" target="_blank">Шаблон Webpack</a></li>
        <li><a href="https://vue-loader.vuejs.org" class="nav-link" target="_blank">Vue Loader</a></li>
      </ul>
    </li>
    <li><h4>Официальные плагины</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/" class="nav-link" target="_blank">Vue Router</a></li>
      <li><a href="https://vuex.vuejs.org/" class="nav-link" target="_blank">Vuex</a></li>
      <li><a href="https://ssr.vuejs.org/" class="nav-link" target="_blank">Vue Server Renderer</a></li>
    </ul></li>
    <li><h4>Новости</h4></li>
    <li><ul>
      <li><a href="https://news.vuejs.org" class="nav-link" target="_blank">Еженедельные новости</a></li>
      <li><a href="https://github.com/vuejs/roadmap" class="nav-link" target="_blank">Roadmap</a></li>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank">Блог</a></li>
      <li><a href="https://vuejsjob.com/?ref=vuejs" class="nav-link" target="_blank">Вакансии</a></li>
    </ul></li>
    <li><h4>Списки ресурсов</h4></li>
    <li><ul>
      <li><a href="https://github.com/vuejs" class="nav-link" target="_blank">Официальные репозитории</a></li>
      <li><a href="https://curated.vuejs.org/" class="nav-link" target="_blank">Vue Curated</a></li>
      <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank">Awesome Vue</a></li>
    </ul></li>
  </ul>
</li>

<li>
  <a href="/v2/guide/team.html" class="nav-link team">Команда</a>
</li>
<li class="nav-dropdown-container support-vue">
  <a href="/support-vuejs/" class="nav-link">Поддержать Vue</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/support-vuejs/#One-time-Donations" class="nav-link">Единоразовые пожертвования</a></li>
      <li><a href="/support-vuejs/#Recurring-Pledges" class="nav-link">Повторяющиеся взносы</a></li>
      <li><a href="https://vue.threadless.com" target="_blank" class="nav-link">Магазин футболок</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container language">
  <a class="nav-link">Переводы</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">English</a></li>
    <li><a href="https://cn.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">中文</a></li>
    <li><a href="https://jp.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">日本語</a></li>
    <li><a href="https://kr.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">한국어</a></li>
    <li><a href="https://br.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">Português</a></li>
    <li><a href="https://fr.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">Français</a></li>
    <li><a href="https://vi.vuejs.org/v2/cookbook/unit-testing-vue-components.html" class="nav-link" target="_blank">Tiếng Việt</a></li>
  </ul>
</li>


        </ul>
        <div class="list">
            <div id="sidebar-sponsors-special">
  <div class="main-sponsor">
    <span>Специальные спонсоры</span>
    <div>
    <a href="https://stdlib.com" target="_blank" class="logo">
      <img src="/images/stdlib.png">
    </a>
    <a href="https://www.bitsrc.io/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue" target="_blank" class="logo">
      <img src="/images/bit-wide.png">
    </a>
    </div>
  </div>
</div>

<div id="sidebar-sponsors-platinum">
  <div class="main-sponsor">
    <span>Спонсоры на Patreon</span>
    <div>
    <a href="http://tooltwist.com/" target="_blank" class="logo">
      <img src="/images/tooltwist.png">
    </a>
    <a href="https://vueschool.io/?utm_source=Vuejs.org&utm_medium=Banner&utm_campaign=Sponsored%20Banner&utm_content=V1" target="_blank" class="logo">
      <img src="/images/vueschool.png">
    </a>
    <a href="https://www.datacamp.com/careers?utm_source=vuejs&utm_medium=sidebar" target="_blank" class="logo">
      <img src="/images/datacamp.png">
    </a>
    </div>
  </div>
  <a class="become-backer" href="/support-vuejs">
    Поддержите Vue.js
  </a>
</div>

            <h2>
                
                Cookbook<sup class="beta">beta</sup>
                
            </h2>
            <ul class="menu-root">
    
        
        
        <li>
            <a href="/v2/cookbook/index.html" class="sidebar-link">Introduction</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/adding-instance-properties.html" class="sidebar-link">Adding Instance Properties</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/form-validation.html" class="sidebar-link">Form Validation</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/editable-svg-icons.html" class="sidebar-link">Editable SVG Icon Systems</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/serverless-blog.html" class="sidebar-link">Create a CMS-Powered Blog</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/unit-testing-vue-components.html" class="sidebar-link current">Unit Testing Vue Components</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/creating-custom-scroll-directives.html" class="sidebar-link">Creating Custom Scroll Directives</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/using-axios-to-consume-apis.html" class="sidebar-link">Using Axios to Consume APIs</a>
        </li>
    
</ul>

        </div>
    </div>
</div>


<div class="content cookbook with-sidebar ">
    
      
        <div id="ad">
  <script>
    (function () {
      var s = document.createElement('script')
      s.setAttribute('async', '')
      s.src = '//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=vuejs'
      s.id = '_carbonads_js'
      document.getElementById('ad').appendChild(s)
    })()
  </script>
</div>

      
    
    
      <h1>Unit Testing Vue Components</h1>
    
    
      <h2 id="Simple-Example"><a href="#Simple-Example" class="headerlink" title="Simple Example"></a>Simple Example</h2><p>Unit testing is a fundamental part of software development. Unit tests execute the smallest units of code in isolation, in order to increase ease of adding new features and track down bugs. Vue’s <a href="../guide/single-file-components.html">single-file components</a> make it straight forward to write unit tests for components in isolation. This lets you develop new features with confidence you are not breaking existing ones, and helps other developers understand what your component does.</p>
<p>This simple example tests whether some text is rendered:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">v-if</span>=<span class="string">"error"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"error"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      &#123;&#123; error &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'Hello'</span>,</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      username: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="undefined">    error () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.username.trim().length &lt; <span class="number">7</span></span></span><br><span class="line"><span class="javascript">        ? <span class="string">'Please enter a longer username'</span></span></span><br><span class="line"><span class="javascript">        : <span class="string">''</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallow &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span></span><br><span class="line"></span><br><span class="line">test(<span class="string">'Foo'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="comment">// render the component</span></span><br><span class="line">  <span class="keyword">const</span> wrapper = shallow(Hello)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// should not allow for `username` less than 7 characters, excludes whitespace</span></span><br><span class="line">  wrapper.setData(&#123; <span class="attr">username</span>: <span class="string">' '</span>.repeat(<span class="number">7</span>) &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// assert the error is rendered</span></span><br><span class="line">  expect(wrapper.find(<span class="string">'.error'</span>).exists()).toBe(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// update the name to be long enough</span></span><br><span class="line">  wrapper.setData(&#123;</span><br><span class="line">    username: <span class="string">'Lachlan'</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// assert the error has gone away</span></span><br><span class="line">  expect(wrapper.find(<span class="string">'.error'</span>).exists()).toBe(<span class="literal">false</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>The above code snippet shows how to test whether an error message is rendered based on the length of the username. It demonstrates the general idea of unit testing Vue components: render the component, and assert that the markup matches the state of the component.</p>
<h2 id="Why-test"><a href="#Why-test" class="headerlink" title="Why test?"></a>Why test?</h2><p>Component unit tests have lots of benefits:</p>
<ul>
<li>Provide documentation on how the component should behave</li>
<li>Save time over testing manually</li>
<li>Reduce bugs in new features</li>
<li>Improve design</li>
<li>Facilitate refactoring</li>
</ul>
<p>Automated testing allows large teams of developers to maintain complex codebases.</p>
<h4 id="Getting-started"><a href="#Getting-started" class="headerlink" title="Getting started"></a>Getting started</h4><p><a href="https://github.com/vuejs/vue-test-utils" target="_blank" rel="noopener">Vue Test Utils</a> is the official library for unit testing Vue components. The <a href="https://github.com/vuejs/vue-cli" target="_blank" rel="noopener">vue-cli</a> <code>webpack</code> template comes with either Karma or Jest, both well supported test runners, and there are some <a href="https://vue-test-utils.vuejs.org/en/guides/" target="_blank" rel="noopener">guides</a> in the Vue Test Utils documentation.</p>
<h2 id="Real-World-Example"><a href="#Real-World-Example" class="headerlink" title="Real-World Example"></a>Real-World Example</h2><p>Unit tests should be:</p>
<ul>
<li>Fast to run</li>
<li>Easy to understand</li>
<li>Only test a <em>single unit of work</em></li>
</ul>
<p>Let’s continue building on the previous example, while introducing the idea of a <a href="https://en.wikipedia.org/wiki/Factory_(object-oriented_programming)" target="_blank" rel="noopener">factory function</a> to make our test more compact and readable. The component should:</p>
<ul>
<li>show a ‘Welcome to the Vue.js cookbook’ greeting.</li>
<li>prompt the user to enter their username</li>
<li>display an error if the entered username is less than seven letters</li>
</ul>
<p>Let’s take a look at the component code first:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"message"</span>&gt;</span></span><br><span class="line">      &#123;&#123; message &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    Enter your username: <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">v-if</span>=<span class="string">"error"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"error"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      Please enter a username with at least seven letters.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'Foo'</span>,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      message: <span class="string">'Welcome to the Vue.js cookbook'</span>,</span></span><br><span class="line"><span class="javascript">      username: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="undefined">    error () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.username.trim().length &lt; <span class="number">7</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The things that we should test are:</p>
<ul>
<li>is the <code>message</code> rendered?</li>
<li>if <code>error</code> is <code>true</code>, <code>&lt;div class=&quot;error&quot;&gt;</code> should be present</li>
<li>if <code>error</code> is <code>false</code>, <code>&lt;div class=&quot;error&quot;&gt;</code> should not be present</li>
</ul>
<p>And our first attempt at test:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallow &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span></span><br><span class="line"></span><br><span class="line">describe(<span class="string">'Foo'</span>, () =&gt; &#123;</span><br><span class="line">  it(<span class="string">'renders a message and responds correctly to user input'</span>, () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> wrapper = shallow(Foo, &#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">      message: <span class="string">'Hello World'</span>,</span><br><span class="line">      username: <span class="string">''</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// see if the message renders</span></span><br><span class="line">  expect(wrapper.find(<span class="string">'.message'</span>).text()).toEqual(<span class="string">'Hello World'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// assert the error is rendered</span></span><br><span class="line">  expect(wrapper.find(<span class="string">'.error'</span>).exists()).toBeTruthy()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// update the `username` and assert error is longer rendered</span></span><br><span class="line">  wrapper.setData(&#123; <span class="attr">username</span>: <span class="string">'Lachlan'</span> &#125;)</span><br><span class="line">  expect(wrapper.find(<span class="string">'.error'</span>).exists()).toBeFalsy()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>There are some problems with the above:</p>
<ul>
<li>a single test is making assertions about different things</li>
<li>difficult to tell the different states the component can be in, and what should be rendered</li>
</ul>
<p>The below example improves the test by:</p>
<ul>
<li>only making one assertion per <code>it</code> block</li>
<li>having short, clear test descriptions</li>
<li>providing only the minimum data requires for the test</li>
<li>refactoring duplicated logic (creating the <code>wrapper</code> and setting the <code>username</code> variable) into a factory function</li>
</ul>
<p><em>Updated test</em>:<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallow &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span></span><br><span class="line"><span class="keyword">import</span> Foo <span class="keyword">from</span> <span class="string">'./Foo'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> factory = <span class="function">(<span class="params">values = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> shallow(Foo, &#123;</span><br><span class="line">    data: &#123; ...values  &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'Foo'</span>, () =&gt; &#123;</span><br><span class="line">  it(<span class="string">'renders a welcome message'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = factory()</span><br><span class="line"></span><br><span class="line">    expect(wrapper.find(<span class="string">'.message'</span>).text()).toEqual(<span class="string">"Welcome to the Vue.js cookbook"</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  it(<span class="string">'renders an error when username is less than 7 characters'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = factory(&#123; <span class="attr">username</span>: <span class="string">''</span>  &#125;)</span><br><span class="line"></span><br><span class="line">    expect(wrapper.find(<span class="string">'.error'</span>).exists()).toBeTruthy()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  it(<span class="string">'renders an error when username is whitespace'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = factory(&#123; <span class="attr">username</span>: <span class="string">' '</span>.repeat(<span class="number">7</span>) &#125;)</span><br><span class="line"></span><br><span class="line">    expect(wrapper.find(<span class="string">'.error'</span>).exists()).toBeTruthy()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  it(<span class="string">'does not render an error when username is 7 characters or more'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = factory(&#123; <span class="attr">username</span>: <span class="string">'Lachlan'</span>  &#125;)</span><br><span class="line"></span><br><span class="line">    expect(wrapper.find(<span class="string">'.error'</span>).exists()).toBeFalsy()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>Points to note:</p>
<p>At the top, we declare the factory function which merges the <code>values</code> object into <code>data</code> and returns a new <code>wrapper</code> instance. This way, we don’t need to duplicate <code>const wrapper = shallow(Foo)</code> in every test. Another great benefit to this is when more complex components with a method or computed property you might want to mock or stub in every test, you only need to declare it once.</p>
<h2 id="Additional-Context"><a href="#Additional-Context" class="headerlink" title="Additional Context"></a>Additional Context</h2><p>The above test is fairly simple, but in practice Vue components often have other behaviors you want to test, such as:</p>
<ul>
<li>making API calls</li>
<li>committing or dispatching mutations or actions with a <code>Vuex</code> store</li>
<li>testing interaction</li>
</ul>
<p>There are more complete examples showing such tests in the Vue Test Utils <a href="https://vue-test-utils.vuejs.org/en/guides/" target="_blank" rel="noopener">guides</a>.</p>
<p>Vue Test Utils and the enormous JavaScript ecosystem provides plenty of tooling to facilitate almost 100% test coverage. Unit tests are only one part of the testing pyramid, though. Some other types of tests include e2e (end to end) tests, and snapshot tests. Unit tests are the smallest and most simple of tests - they make assertions on the smallest units of work, isolating each part of a single component.</p>
<p>Snapshot tests save the markup of your Vue component, and compare to the new one generated each time the test runs. If something changes, the developer is notified, and can decide if the change was intentional (the component was updated) or accidental (the component is behaving incorrectly).</p>
<p>End to end tests ensure a number of components interact well together. They are more high level. Some examples might be testing if a user can sign up, log in, and update their username. These are slower to run than unit tests or snapshot tests.</p>
<p>Unit tests are most useful during development, either to help a developer think about how to design a component, or refactor an existing component, and are often run every time code is changed.</p>
<p>Higher level tests, such as end to end tests, run much slower. These usually run pre-deploy, to ensure each part of the system is working together correctly.</p>
<p>More information about testing Vue components can be found in <a href="https://www.manning.com/books/testing-vuejs-applications" target="_blank" rel="noopener">Testing Vue.js Applications</a> by core team member <a href="https://eddyerburgh.me/" target="_blank" rel="noopener">Edd Yerburgh</a>.</p>
<h2 id="When-To-Avoid-This-Pattern"><a href="#When-To-Avoid-This-Pattern" class="headerlink" title="When To Avoid This Pattern"></a>When To Avoid This Pattern</h2><p>Unit testing is an important part of any serious application. At first, when the vision of an application is not clear, unit testing might slow down development, but once a vision is established and real users will be interacting with the application, unit tests (and other types of automated tests) are absolutely essential to ensure the codebase is maintainable and scalable.</p>

    
    
    <div class="footer">
        <script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>
<div class="bsa-cpc"></div>
<script>
  (function(){
    if(typeof _bsa !== 'undefined' && _bsa) {
    _bsa.init('default', 'CKYD62QM', 'placement:vuejsorg', {
      target: '.bsa-cpc',
      align: 'horizontal',
      disable_css: 'true'
    });
      }
  })();
</script>

      Обнаружили ошибку или хотите добавить что-то своё в документацию?
      <a href="https://github.com/translation-gang/ru.vuejs.org/blob/master/src/v2/cookbook/unit-testing-vue-components.md" target="_blank">
        Отредактируйте эту страницу на GitHub!
      </a>
    </div>
</div>

                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/css.escape.js"></script>
        <script src="/js/common.js"></script>

        <!-- search -->
        <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/css/search.css">
        <script src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
        <script>
        [
          '#search-query-nav',
          '#search-query-sidebar',
          '#search-query-menu'
        ].forEach(function (selector) {
          if (!document.querySelector(selector)) return
          // search index defaults to v2
          var match = window.location.pathname.match(/^\/(v\d+)/)
          var version = match ? match[1] : 'v2'
          docsearch({
            appId: 'BH4D9OD16A',
            apiKey: 'c6f9366f6f7fe057ee3e01747b603d9f',
            indexName: 'vuejs_ru',
            inputSelector: selector,
            algoliaOptions: { facetFilters: ["version:" + version] }
          })
        })
        </script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
    </body>
</html>
