---
title: Инстанс Vue
type: guide
order: 3
---

## Конструктор

Каждый vm — это **корневой инстанс Vue**, создаваемый функцией-конструктором:

``` js
var vm = new Vue({
  // опции
})
```

Хотя Vue и не реализует [паттерн MVVM](https://en.wikipedia.org/wiki/Model_View_ViewModel) в полной мере, архитектура фреймворка несомненно им во многом вдохновлена. Поэтому традиционно переменная с истансом Vue называется `vm` (сокращённо от ViewModel).

При создании инстанса Vue необходимо передать **объект опций**, содержащий настройки данных, шаблона, элемента монтирования, методов, хуков жизненного цикла и т. д. Полный список опций можно найти в [справочнике API](../api).

Конструктор `Vue` можно расширить, получив переиспользуемый **компонент** с предустановленными опциями:

``` js
var MyComponent = Vue.extend({
  // опции компонента
})

// все инстансы `MyComponent` создаются
// с предопределёнными опциями
var myComponentInstance = new MyComponent()
```

Хотя можно создать инстанс компонента императивно, как показано выше, чаще рекомендуется создавать их декларативно, как пользовательские элементы в шаблонах. Мы поговорим о [системе компонентов](components.html) более подробно позднее. Пока достаточно запомнить, что все компоненты Vue по сути являются расширенными инстансами Vue.

## Свойства и методы

Каждый инстанс Vue **проксирует** все свойства своего объекта `data`:

``` js
var data = { a: 1 }
var vm = new Vue({
  data: data
})

vm.a === data.a // -> true

// установка свойства также влияет на оригинальные данные
vm.a = 2
data.a // -> 2

// ... и наоборот
data.a = 3
vm.a // -> 3
```

Стоит заметить, что только эти проксируемые свойства являются **реактивными**. Если вы установите новое свойство инстансу после его создания, это не обновит представление. Мы обсудим реактивность в подробностях позднее.

Помимо свойств объекта data, инстанс Vue предоставляет ряд собственных свойств и методов. Их имена начинаются с `$`, чтобы отличаться от свойств данных. Например:

``` js
var data = { a: 1 }
var vm = new Vue({
  el: '#example',
  data: data
})

vm.$data === data // -> true
vm.$el === document.getElementById('example') // -> true

// $watch — это метод инстанса
vm.$watch('a', function (newVal, oldVal) {
  // этот коллбэк будет вызван, когда изменится `vm.a`
})
```

<p class="tip">Не используйте [arrow-функции](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/Arrow_functions) в свойствах инстанса и в коллбэках (напр. `vm.$watch('a', newVal => this.myMethod())`). Поскольку arrow-функции связываются с родительским контекстом, `this` не будет указывать на инстанс Vue, и `this.myMethod` окажется неопределённым.</p>

Полный список свойств и методов инстанса Vue есть в [справочнике API](../api).

## Хуки жизненного цикла инстанса

Каждый инстанс Vue проходит при своём создании через последовательность шагов инициализации — например, настраивает наблюдения за данными, компилирует шаблон, монтирует инстанс в DOM, а также обновляет DOM при изменении данных. Во время этих шагов вызываются **хуки жизненного цикла**, дающие возможность выполнять какие-нибудь дополнительные действия. Например, хук `created` вызывается после создания инстанса:

``` js
var vm = new Vue({
  data: {
    a: 1
  },
  created: function () {
    // `this` указывает на инстанс vm
    console.log('a is: ' + this.a)
  }
})
// -> "a is: 1"
```

Существуют также другие хуки, вызываемые на различных стадиях жизненного цикла инстанса, например `mounted`, `updated` и `destroyed`. Все хуки вызываются с контекстной переменной `this`, ссылающейся на вызывающий инстанс Vue. Возможно, вы недоумевали: где в мире Vue контроллеры? Ответ на этот вопрос таков: контроллеров не существует. Всё пользовательское поведение компонента должно быть размещено в этих хуках.

## Диаграмма жизненного цикла

Ниже представлена диаграмма жизненного цикла инстанса. Необязательно понимать её полностью уже сейчас, но в будущем она вам пригодится.

![Lifecycle](/images/lifecycle.png)
